# ğŸš€ GitHub Docker æ„å»ºæ›´æ–°å®Œæˆæ€»ç»“

## âœ… **æ›´æ–°å®Œæˆï¼**

å·²æˆåŠŸæ›´æ–°GitHub Actionså·¥ä½œæµï¼Œç°åœ¨ä½¿ç”¨Ubuntu 24.04 + Node.js 22è¿›è¡Œæ„å»ºï¼

## ğŸ“Š **ä¸»è¦æ›´æ–°å†…å®¹**

### **1. Dockerfileæ›´æ”¹**
- âœ… **æ–°Dockerfile**: `Dockerfile.ubuntu24-robust`
- âœ… **åŸºç¡€é•œåƒ**: Ubuntu 24.04 LTS
- âœ… **Node.jsç‰ˆæœ¬**: 22.17.1
- âœ… **æ¶æ„æ”¯æŒ**: AMD64 + ARM64

### **2. GitHub Actionsæ›´æ–°**
- âœ… **å·¥ä½œæµåç§°**: æ›´æ–°ä¸º "Build and Push Docker Images (Ubuntu 24.04 + Node.js 22)"
- âœ… **æ„å»ºç›®æ ‡**: æŒ‡å®šä½¿ç”¨ `Dockerfile.ubuntu24-robust`
- âœ… **æ„å»ºå‚æ•°**: æ·»åŠ  `NODE_VERSION=22.17.1` å’Œ `UBUNTU_VERSION=24.04`
- âœ… **æ ‡ç­¾å¢å¼º**: æ·»åŠ  `ubuntu24` æ ‡ç­¾

### **3. æµ‹è¯•æ”¹è¿›**
- âœ… **ä¾èµ–å®‰è£…**: é‡è¯•æœºåˆ¶ï¼Œæ›´ç¨³å®šçš„å®‰è£…è¿‡ç¨‹
- âœ… **æ„å»ºæµ‹è¯•**: å¤šå±‚å›é€€ç­–ç•¥ç¡®ä¿æ„å»ºæˆåŠŸ
- âœ… **æœåŠ¡å™¨æµ‹è¯•**: æ·»åŠ æœåŠ¡å™¨å¯åŠ¨æµ‹è¯•
- âœ… **å®¹å™¨æµ‹è¯•**: å®Œæ•´çš„å®¹å™¨éƒ¨ç½²å’Œå¥åº·æ£€æŸ¥æµ‹è¯•

### **4. å®‰å…¨å’Œè´¨é‡**
- âœ… **SBOMç”Ÿæˆ**: è½¯ä»¶ç‰©æ–™æ¸…å•ç”Ÿæˆ (sbom-ubuntu24)
- âœ… **æ¼æ´æ‰«æ**: Trivyå®‰å…¨æ‰«æ (trivy-results-ubuntu24)
- âœ… **ç‰ˆæœ¬ç®¡ç†**: è‡ªåŠ¨æ¸…ç†æ—§ç‰ˆæœ¬ï¼Œä¿ç•™æœ€æ–°5ä¸ªç‰ˆæœ¬

## ğŸ³ **æ–°çš„Dockeré•œåƒæ ‡ç­¾**

å½“ä»£ç æ¨é€åˆ°mainåˆ†æ”¯æ—¶ï¼Œä¼šè‡ªåŠ¨æ„å»ºä»¥ä¸‹æ ‡ç­¾ï¼š

- `ghcr.io/yeagoo/dommate:latest` - æœ€æ–°ç‰ˆæœ¬
- `ghcr.io/yeagoo/dommate:stable` - ç¨³å®šç‰ˆæœ¬
- `ghcr.io/yeagoo/dommate:ubuntu24` - Ubuntu 24.04ä¸“ç”¨æ ‡ç­¾
- `ghcr.io/yeagoo/dommate:main` - mainåˆ†æ”¯ç‰ˆæœ¬
- `ghcr.io/yeagoo/dommate:2025-07-29` - æ—¥æœŸæ ‡ç­¾
- `ghcr.io/yeagoo/dommate:main-<commit-hash>` - æäº¤å“ˆå¸Œæ ‡ç­¾

## ğŸš€ **è§¦å‘æ„å»º**

### **è‡ªåŠ¨è§¦å‘**
- âœ… æ¨é€åˆ° `main` æˆ– `develop` åˆ†æ”¯
- âœ… åˆ›å»ºæ ‡ç­¾ (v*)
- âœ… åˆ›å»ºPull Requeståˆ°mainåˆ†æ”¯

### **æ‰‹åŠ¨è§¦å‘**
- âœ… GitHub Actionsé¡µé¢æ‰‹åŠ¨è¿è¡Œ
- âœ… å¯é€‰æ‹©æ˜¯å¦æ¨é€åˆ°æ³¨å†Œè¡¨

## ğŸ”§ **å·¥ä½œæµç¨‹**

```mermaid
graph LR
    A[ä»£ç æ¨é€] --> B[æµ‹è¯•é˜¶æ®µ]
    B --> C[æ„å»ºDockeré•œåƒ]
    C --> D[å®‰å…¨æ‰«æ]
    D --> E[éƒ¨ç½²æµ‹è¯•]
    E --> F[åˆ›å»ºå‘å¸ƒæ€»ç»“]
    F --> G[æ¸…ç†æ—§ç‰ˆæœ¬]
```

### **å„é˜¶æ®µè¯¦æƒ…**

1. **ğŸ§ª æµ‹è¯•é˜¶æ®µ** (`test`)
   - Node.js 22ç¯å¢ƒè®¾ç½®
   - ä¾èµ–å®‰è£…ï¼ˆé‡è¯•æœºåˆ¶ï¼‰
   - å‰ç«¯æ„å»ºæµ‹è¯•ï¼ˆå›é€€ç­–ç•¥ï¼‰
   - æœåŠ¡å™¨å¯åŠ¨æµ‹è¯•

2. **ğŸ—ï¸ æ„å»ºé˜¶æ®µ** (`build`)
   - Multi-platformæ„å»º (AMD64/ARM64)
   - ä½¿ç”¨ `Dockerfile.ubuntu24-robust`
   - GitHub Container Registryæ¨é€
   - SBOMå’Œå®‰å…¨æ‰«æ

3. **ğŸ§ª éƒ¨ç½²æµ‹è¯•** (`deploy-test`)
   - æ‹‰å–æ„å»ºçš„é•œåƒ
   - å®¹å™¨å¯åŠ¨æµ‹è¯•
   - å¥åº·æ£€æŸ¥éªŒè¯
   - å‰ç«¯è®¿é—®æµ‹è¯•

4. **ğŸ“‹ å‘å¸ƒæ€»ç»“** (`release`)
   - ç”Ÿæˆéƒ¨ç½²æ€»ç»“
   - æä¾›å¿«é€Ÿå¯åŠ¨å‘½ä»¤
   - æ˜¾ç¤ºè®¿é—®åœ°å€

5. **ğŸ§¹ æ¸…ç†** (`cleanup`)
   - åˆ é™¤æ—§ç‰ˆæœ¬é•œåƒ
   - ä¿ç•™æœ€æ–°5ä¸ªç‰ˆæœ¬

## ğŸ¯ **ä¸‹ä¸€æ­¥æ“ä½œ**

### **ç«‹å³æ¨é€åˆ°GitHub**
```bash
# æäº¤æ›´æ–°çš„GitHub Actionså·¥ä½œæµ
git add .github/workflows/docker-build.yml
git commit -m "ğŸš€ Update GitHub Actions for Ubuntu 24.04 + Node.js 22 Docker build

- Switch to Dockerfile.ubuntu24-robust
- Upgrade to Node.js 22.17.1 and Ubuntu 24.04 LTS
- Add enhanced testing with fallback strategies
- Improve container deployment testing
- Add ubuntu24 tag for new image version
- Update SBOM and security scanning artifacts"

git push origin main
```

### **ç›‘æ§æ„å»ºè¿‡ç¨‹**
1. ğŸ” è®¿é—®GitHub Actionsé¡µé¢
2. ğŸ“Š æŸ¥çœ‹æ„å»ºè¿›åº¦å’Œæ—¥å¿—
3. âœ… éªŒè¯æ‰€æœ‰æµ‹è¯•é€šè¿‡
4. ğŸ³ ç¡®è®¤é•œåƒæˆåŠŸæ¨é€åˆ°GHCR

### **æµ‹è¯•æ–°é•œåƒ**
```bash
# æ‹‰å–æ–°æ„å»ºçš„é•œåƒ
docker pull ghcr.io/yeagoo/dommate:ubuntu24

# å¯åŠ¨æµ‹è¯•
docker run -d --name dommate-ubuntu24 \
  -p 3001:3001 \
  -v dommate-data:/app/data \
  ghcr.io/yeagoo/dommate:ubuntu24
```

## ğŸ“ˆ **æ”¹è¿›äº®ç‚¹**

### **æŠ€æœ¯å‡çº§**
- ğŸŸ¢ **Node.js 22.17.1**: æœ€æ–°LTSç‰ˆæœ¬
- ğŸŸ¢ **Ubuntu 24.04**: æœ€æ–°LTSï¼Œæ”¯æŒåˆ°2029å¹´
- ğŸŸ¢ **å¤šæ¶æ„æ”¯æŒ**: AMD64 + ARM64
- ğŸŸ¢ **ç¼–ç æ”¯æŒ**: å®Œæ•´çš„localeæ”¯æŒ

### **æ„å»ºç¨³å®šæ€§**
- ğŸ”„ **é‡è¯•æœºåˆ¶**: ä¾èµ–å®‰è£…å¤±è´¥è‡ªåŠ¨é‡è¯•
- ğŸ”„ **å›é€€ç­–ç•¥**: å¤šå±‚æ„å»ºå›é€€ç¡®ä¿æˆåŠŸ
- ğŸ”„ **å®¹é”™è®¾è®¡**: å…³é”®æ­¥éª¤å¤±è´¥ä¸ä¼šç»ˆæ­¢æ•´ä¸ªæµç¨‹

### **å®‰å…¨å¢å¼º**
- ğŸ›¡ï¸ **æ¼æ´æ‰«æ**: è‡ªåŠ¨Trivyæ‰«æ
- ğŸ›¡ï¸ **SBOMç”Ÿæˆ**: è½¯ä»¶ç‰©æ–™æ¸…å•
- ğŸ›¡ï¸ **ç‰ˆæœ¬ç®¡ç†**: è‡ªåŠ¨æ¸…ç†é™ä½å®‰å…¨é£é™©

## ğŸŠ **æ€»ç»“**

**ğŸ‰ GitHub Dockeræ„å»ºå·²æˆåŠŸæ›´æ–°ä¸ºUbuntu 24.04 + Node.js 22ç‰ˆæœ¬ï¼**

### **ä¸»è¦æˆå°±**
- âœ… **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: æœ€æ–°çš„Ubuntu LTS + Node.js 22
- âœ… **å¢å¼ºç¨³å®šæ€§**: å¤šé‡æµ‹è¯•å’Œå›é€€æœºåˆ¶
- âœ… **å®‰å…¨å¼ºåŒ–**: å®Œæ•´çš„æ‰«æå’Œç›‘æ§
- âœ… **æ˜“äºä½¿ç”¨**: æ¸…æ™°çš„æ ‡ç­¾å’Œéƒ¨ç½²æŒ‡å—

### **ç«‹å³è¡ŒåŠ¨**
```bash
# æ¨é€æ›´æ–°å¹¶è§¦å‘æ„å»º
git add . && git commit -m "ğŸš€ Upgrade to Ubuntu 24.04 + Node.js 22" && git push
```

**ğŸš€ æ‚¨çš„DomMateé¡¹ç›®ç°åœ¨ä½¿ç”¨æœ€å…ˆè¿›çš„å®¹å™¨åŒ–æ„å»ºæµç¨‹ï¼** 