import{c as b,j as e,a as S,B as D}from"./createLucideIcon.mgYnVIzO.js";import{r as o}from"./index.CG1BCU3E.js";import{n as Je,o as me,p as Xe,q as z,r as Ze,s as V,t as Qe,u as We,v as Ye,w as es,g as E,D as ue,b as pe,c as xe,d as he,e as fe,L as I,l as J,h as ge,I as je,T as ss,B as as,C as ts,a as rs,f as oe,R as os,i as U,F as ne,j as le,k as ie,m as ns}from"./exportUtils.DVQzN8bT.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=b("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=b("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=b("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=b("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=b("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=b("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=b("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=b("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=b("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=b("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=b("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=b("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=b("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=b("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=b("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var O="Tabs",[js,Is]=Je(O,[me]),be=me(),[vs,Q]=js(O),ye=o.forwardRef((a,r)=>{const{__scopeTabs:t,value:m,onValueChange:g,defaultValue:j,orientation:i="horizontal",dir:y,activationMode:N="automatic",...k}=a,n=We(y),[x,c]=Ye({prop:m,onChange:g,defaultProp:j??"",caller:O});return e.jsx(vs,{scope:t,baseId:es(),value:x,onValueChange:c,orientation:i,dir:n,activationMode:N,children:e.jsx(z.div,{dir:n,"data-orientation":i,...k,ref:r})})});ye.displayName=O;var Ne="TabsList",we=o.forwardRef((a,r)=>{const{__scopeTabs:t,loop:m=!0,...g}=a,j=Q(Ne,t),i=be(t);return e.jsx(Xe,{asChild:!0,...i,orientation:j.orientation,dir:j.dir,loop:m,children:e.jsx(z.div,{role:"tablist","aria-orientation":j.orientation,...g,ref:r})})});we.displayName=Ne;var ke="TabsTrigger",Ce=o.forwardRef((a,r)=>{const{__scopeTabs:t,value:m,disabled:g=!1,...j}=a,i=Q(ke,t),y=be(t),N=Te(i.baseId,m),k=Ge(i.baseId,m),n=m===i.value;return e.jsx(Ze,{asChild:!0,...y,focusable:!g,active:n,children:e.jsx(z.button,{type:"button",role:"tab","aria-selected":n,"aria-controls":k,"data-state":n?"active":"inactive","data-disabled":g?"":void 0,disabled:g,id:N,...j,ref:r,onMouseDown:V(a.onMouseDown,x=>{!g&&x.button===0&&x.ctrlKey===!1?i.onValueChange(m):x.preventDefault()}),onKeyDown:V(a.onKeyDown,x=>{[" ","Enter"].includes(x.key)&&i.onValueChange(m)}),onFocus:V(a.onFocus,()=>{const x=i.activationMode!=="manual";!n&&!g&&x&&i.onValueChange(m)})})})});Ce.displayName=ke;var De="TabsContent",Se=o.forwardRef((a,r)=>{const{__scopeTabs:t,value:m,forceMount:g,children:j,...i}=a,y=Q(De,t),N=Te(y.baseId,m),k=Ge(y.baseId,m),n=m===y.value,x=o.useRef(n);return o.useEffect(()=>{const c=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(c)},[]),e.jsx(Qe,{present:g||n,children:({present:c})=>e.jsx(z.div,{"data-state":n?"active":"inactive","data-orientation":y.orientation,role:"tabpanel","aria-labelledby":N,hidden:!c,id:k,tabIndex:0,...i,ref:r,style:{...a.style,animationDuration:x.current?"0s":void 0},children:c&&j})})});Se.displayName=De;function Te(a,r){return`${a}-trigger-${r}`}function Ge(a,r){return`${a}-content-${r}`}var bs=ye,Fe=we,Ae=Ce,Re=Se;const Es=bs,ys=o.forwardRef(({className:a,...r},t)=>e.jsx(Fe,{ref:t,className:S("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r}));ys.displayName=Fe.displayName;const Ns=o.forwardRef(({className:a,...r},t)=>e.jsx(Ae,{ref:t,className:S("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r}));Ns.displayName=Ae.displayName;const ws=o.forwardRef(({className:a,...r},t)=>e.jsx(Re,{ref:t,className:S("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r}));ws.displayName=Re.displayName;const ks=o.forwardRef(({className:a,...r},t)=>e.jsx("textarea",{className:S("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r}));ks.displayName="Textarea";const Me=o.forwardRef(({className:a,...r},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:S("w-full caption-bottom text-sm",a),...r})}));Me.displayName="Table";const $e=o.forwardRef(({className:a,...r},t)=>e.jsx("thead",{ref:t,className:S("[&_tr]:border-b",a),...r}));$e.displayName="TableHeader";const Ie=o.forwardRef(({className:a,...r},t)=>e.jsx("tbody",{ref:t,className:S("[&_tr:last-child]:border-0",a),...r}));Ie.displayName="TableBody";const Cs=o.forwardRef(({className:a,...r},t)=>e.jsx("tfoot",{ref:t,className:S("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r}));Cs.displayName="TableFooter";const Z=o.forwardRef(({className:a,...r},t)=>e.jsx("tr",{ref:t,className:S("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r}));Z.displayName="TableRow";const T=o.forwardRef(({className:a,...r},t)=>e.jsx("th",{ref:t,className:S("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r}));T.displayName="TableHead";const G=o.forwardRef(({className:a,...r},t)=>e.jsx("td",{ref:t,className:S("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r}));G.displayName="TableCell";const Ds=o.forwardRef(({className:a,...r},t)=>e.jsx("caption",{ref:t,className:S("mt-4 text-sm text-muted-foreground",a),...r}));Ds.displayName="TableCaption";function de({checked:a=!1,onChange:r,disabled:t=!1,className:m=""}){return e.jsx("div",{className:`
        h-4 w-4 rounded-sm border-2 border-gray-300 flex items-center justify-center cursor-pointer
        transition-colors duration-200
        ${a?"bg-blue-600 border-blue-600":"bg-white hover:border-blue-400"}
        ${t?"opacity-50 cursor-not-allowed":""}
        ${m}
      `,onClick:()=>!t&&r?.(!a),children:a&&e.jsx(ve,{className:"h-3 w-3 text-white"})})}function Ss({open:a,onClose:r,selectedDomains:t,domains:m,onSuccess:g,language:j="zh"}){const[i,y]=o.useState([]),[N,k]=o.useState(!0),[n,x]=o.useState(!1),[c,C]=o.useState(""),[p,F]=o.useState("add"),d=j==="en"?{title:"Batch Group Operations",description:`Manage group membership for ${t.length} selected domains`,operation:"Operation",addToGroup:"Add to Group",removeFromGroups:"Remove from Groups",selectGroup:"Select a group",selectedDomains:"Selected Domains",cancel:"Cancel",apply:"Apply",processing:"Processing...",loadingGroups:"Loading groups...",noGroups:"No groups available",success:"Operation completed successfully",error:"Operation failed",removeAllGroups:"Remove from all groups"}:{title:"批量分组操作",description:`管理选中的 ${t.length} 个域名的分组`,operation:"操作类型",addToGroup:"添加到分组",removeFromGroups:"从分组移除",selectGroup:"选择分组",selectedDomains:"选中的域名",cancel:"取消",apply:"应用",processing:"处理中...",loadingGroups:"加载分组中...",noGroups:"暂无分组",success:"操作成功完成",error:"操作失败",removeAllGroups:"从所有分组移除"};o.useEffect(()=>{a&&(R(),C(""),F("add"))},[a]);const R=async()=>{try{k(!0);const l=await E.getGroups();y(l)}catch(l){console.error("获取分组失败:",l)}finally{k(!1)}},h=()=>t.map(l=>m.find(L=>L.id===l)?.domain||l),q=async()=>{if(!c&&p==="add"){alert(j==="en"?"Please select a group":"请选择一个分组");return}x(!0);try{if(p==="add"){for(const A of t)await E.addDomainToGroup(A,c);const l=i.find(A=>A.id===c)?.name;alert(`✅ ${d.success}
已将 ${t.length} 个域名添加到"${l}"分组`)}else if(p==="remove"){for(const l of t){const A=await E.getDomainGroups(l);for(const L of A)await E.removeDomainFromGroup(l,L.id)}alert(`✅ ${d.success}
已将 ${t.length} 个域名从所有分组中移除`)}g(),r()}catch(l){console.error("批量分组操作失败:",l),alert(`❌ ${d.error}
${l instanceof Error?l.message:"未知错误"}`)}finally{x(!1)}};return e.jsx(ue,{open:a,onOpenChange:r,children:e.jsxs(pe,{className:"sm:max-w-md",children:[e.jsxs(xe,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),d.title]}),e.jsx(fe,{children:d.description})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(I,{className:"text-base font-medium",children:d.operation}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[e.jsx("input",{type:"radio",id:"add-operation",name:"operation",value:"add",checked:p==="add",onChange:l=>l.target.checked&&F("add"),className:"w-4 h-4"}),e.jsxs("label",{htmlFor:"add-operation",className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx(X,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:d.addToGroup})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[e.jsx("input",{type:"radio",id:"remove-operation",name:"operation",value:"remove",checked:p==="remove",onChange:l=>l.target.checked&&F("remove"),className:"w-4 h-4"}),e.jsxs("label",{htmlFor:"remove-operation",className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx(gs,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{children:d.removeFromGroups})]})]})]})]}),p==="add"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{className:"text-base font-medium",children:d.selectGroup}),N?e.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg text-gray-500",children:[e.jsx(J,{className:"h-4 w-4 animate-spin"}),d.loadingGroups]}):i.length===0?e.jsx("div",{className:"p-3 border rounded-lg text-gray-500",children:d.noGroups}):e.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto border rounded-lg p-2",children:i.map(l=>e.jsxs("div",{className:`flex items-center space-x-3 p-2 rounded cursor-pointer hover:bg-gray-50 ${c===l.id?"bg-blue-50 border-blue-200":""}`,onClick:()=>C(l.id),children:[e.jsx("input",{type:"radio",name:"group",value:l.id,checked:c===l.id,onChange:()=>C(l.id),className:"w-4 h-4"}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.color}}),e.jsx("span",{className:"font-medium",children:l.name}),l.domainCount>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",l.domainCount," ",j==="en"?"domains":"个域名",")"]})]}),c===l.id&&e.jsx(ve,{className:"h-4 w-4 text-blue-600"})]},l.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{className:"text-base font-medium",children:d.selectedDomains}),e.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-lg p-3 bg-gray-50",children:e.jsx("div",{className:"space-y-1",children:h().map((l,A)=>e.jsxs("div",{className:"text-sm text-gray-700",children:["• ",l]},A))})})]})]}),e.jsxs(ge,{children:[e.jsx(D,{variant:"outline",onClick:r,disabled:n,children:d.cancel}),e.jsx(D,{onClick:q,disabled:n||p==="add"&&!c,className:"gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 animate-spin"}),d.processing]}):d.apply})]})]})})}const Ee={normal:{icon:ds,label:"正常",variant:"success",color:"text-white"},expiring:{icon:us,label:"即将到期",variant:"warning",color:"text-white"},expired:{icon:ms,label:"已过期",variant:"error",color:"text-white"},failed:{icon:cs,label:"查询失败",variant:"secondary",color:"text-gray-600"},unregistered:{icon:ts,label:"未注册",variant:"outline",color:"text-blue-600"}},Ts=a=>{const r=Ee[a],t=r.icon;return e.jsxs("div",{className:"flex items-center gap-1 min-w-[80px] justify-center",children:[e.jsx(t,{className:`h-3 w-3 ${r.color}`}),e.jsx("span",{children:r.label})]})};function Ps({domains:a,onToggleNotifications:r,onRefreshDomain:t,onDeleteDomains:m,onGroupOperationSuccess:g,language:j="zh"}){const[i,y]=o.useState(""),[N,k]=o.useState("expiresAt"),[n,x]=o.useState("asc"),[c,C]=o.useState(new Set),[p,F]=o.useState(!1),[d,R]=o.useState([]),[h,q]=o.useState(null),[l,A]=o.useState([]),[L,Pe]=o.useState([]),[W,Y]=o.useState(!1);o.useEffect(()=>{Le()},[]),o.useEffect(()=>{h!==null&&(h==="ungrouped"?se():ee(h))},[h]);const Le=async()=>{Y(!0);try{const s=await E.getGroups();R(s)}catch(s){console.error("Failed to load groups:",s)}finally{Y(!1)}},ee=async s=>{try{const u=await E.getGroupDomains(s);A(u)}catch(u){console.error("Failed to load group domains:",u)}},se=async()=>{try{const s=await E.getUngroupedDomains();Pe(s)}catch(s){console.error("Failed to load ungrouped domains:",s)}},ae=(h===null?a:h==="ungrouped"?L:l).filter(s=>s.domain.toLowerCase().includes(i.toLowerCase())||s.registrar?.toLowerCase().includes(i.toLowerCase())),B=[...ae].sort((s,u)=>{const w=s[N],P=u[N];if(w===void 0||P===void 0)return 0;let v=0;return w<P&&(v=-1),w>P&&(v=1),n==="desc"?-v:v}),te=s=>{N===s?x(u=>u==="asc"?"desc":"asc"):(k(s),x("asc"))},Be=(s,u)=>{const w=new Set(c);u?w.add(s):w.delete(s),C(w)},ze=s=>{if(s){const u=new Set(B.map(w=>w.id));C(u)}else C(new Set)},Oe=()=>{c.size>0&&m&&(m(Array.from(c)),C(new Set))},qe=()=>{C(new Set),F(!1),g?.(),h==="ungrouped"?se():h!==null&&ee(h)},H=s=>{q(s),C(new Set)},re=(()=>{if(h===null)return{name:f.allDomainsGroup,color:"#6B7280"};if(h==="ungrouped")return{name:f.ungroupedGroup,color:"#6B7280"};{const s=d.find(u=>u.id===h);return s?{name:s.name,color:s.color}:{name:f.unknownGroup,color:"#6B7280"}}})(),f=j==="en"?{searchPlaceholder:"Search domains or registrars...",domain:"Domain",registrar:"Registrar",expiresAt:"Expires",actions:"Actions",deleteSelected:"Delete Selected",groupOperation:"Group Operations",allGroups:"All Groups",ungrouped:"Ungrouped",filterByGroup:"Filter by Group",dnsProvider:"DNS Provider",domainStatus:"Domain Status",statusLabel:"Status Label",lastCheck:"Last Check",notificationStatus:"Notification Status",allDomainsGroup:"All Domains",ungroupedGroup:"Ungrouped",currentlyShowing:"Currently showing:",domainsCount:"domains",unknownGroup:"Unknown Group"}:{searchPlaceholder:"搜索域名或注册商...",domain:"域名",registrar:"注册商",expiresAt:"到期时间",actions:"操作",deleteSelected:"删除选中",groupOperation:"分组操作",allGroups:"全部分组",ungrouped:"未分组",filterByGroup:"按分组筛选",dnsProvider:"DNS 提供商",domainStatus:"域名状态",statusLabel:"状态标识",lastCheck:"最后检查",notificationStatus:"通知状态",allDomainsGroup:"全部域名",ungroupedGroup:"未分组",currentlyShowing:"正在显示:",domainsCount:"个域名",unknownGroup:"未知分组"},He=B.length>0&&c.size===B.length,_e=c.size>0&&c.size<B.length,Ve=s=>s?new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(s)):"-",Ue=s=>{if(!s)return{text:"-",className:"",warning:!1};const u=new Date,P=new Date(s).getTime()-u.getTime(),v=Math.ceil(P/(1e3*60*60*24));let $="",M="",_=!1;return v>0?($=`${v} 天后`,v<=7?(M="text-red-600 font-semibold",_=!0):v<=30?M="text-red-600":v<=90&&(M="text-orange-600")):v===0?($="今天",M="text-red-600 font-semibold",_=!0):($=`${Math.abs(v)} 天前`,M="text-gray-500"),{text:$,className:M,warning:_}},Ke=s=>{if(!s)return"-";const u=new Date,w=new Date(s),P=u.getTime()-w.getTime(),v=Math.floor(P/(1e3*60)),$=Math.floor(v/60),M=Math.floor($/24);return M>0?`${M} 天前`:$>0?`${$} 小时前`:v>0?`${v} 分钟前`:"刚刚"};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsxs("span",{children:[f.filterByGroup,":"]})]}),e.jsxs(D,{variant:h===null?"default":"outline",size:"sm",onClick:()=>H(null),className:"flex items-center gap-1 h-8",children:[e.jsx(K,{className:"h-3 w-3"}),f.allGroups," (",a.length,")"]}),e.jsxs(D,{variant:h==="ungrouped"?"default":"outline",size:"sm",onClick:()=>H("ungrouped"),className:"flex items-center gap-1 h-8",disabled:W,children:[e.jsx(K,{className:"h-3 w-3"}),f.ungrouped," (",L.length,")"]}),d.map(s=>e.jsxs(D,{variant:h===s.id?"default":"outline",size:"sm",onClick:()=>H(s.id),className:"flex items-center gap-1 h-8 relative",style:{backgroundColor:h===s.id?s.color:void 0,borderColor:s.color},disabled:W,children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:s.color}}),s.name," (",s.domainCount||0,")"]},s.id))]}),h!==null&&e.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:f.currentlyShowing}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:re.color}}),e.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:re.name}),e.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:["(",ae.length," ",f.domainsCount,")"]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(hs,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(je,{placeholder:f.searchPlaceholder,value:i,onChange:s=>y(s.target.value),className:"pl-8"})]}),c.size>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(D,{variant:"outline",onClick:()=>F(!0),className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),f.groupOperation," (",c.size,")"]}),m&&e.jsxs(D,{variant:"destructive",onClick:Oe,className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-4 w-4"}),f.deleteSelected," (",c.size,")"]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Me,{children:[e.jsx($e,{children:e.jsxs(Z,{children:[e.jsx(T,{className:"text-center w-12",children:e.jsx(de,{checked:He,onChange:ze,className:_e?"opacity-60":""})}),e.jsx(T,{className:"cursor-pointer hover:bg-muted/50 text-center",onClick:()=>te("domain"),children:e.jsxs("div",{className:"flex items-center justify-center",children:[f.domain,e.jsx(ce,{className:"ml-2 h-4 w-4"})]})}),e.jsx(T,{className:"text-center",children:f.registrar}),e.jsx(T,{className:"cursor-pointer hover:bg-muted/50 text-center min-w-[140px]",onClick:()=>te("expiresAt"),children:e.jsxs("div",{className:"flex items-center justify-center",children:[f.expiresAt,e.jsx(ce,{className:"ml-2 h-4 w-4"})]})}),e.jsx(T,{className:"text-center",children:f.dnsProvider}),e.jsx(T,{className:"text-center",children:f.domainStatus}),e.jsx(T,{className:"text-center",children:f.statusLabel}),e.jsx(T,{className:"text-center",children:f.lastCheck}),e.jsx(T,{children:f.notificationStatus}),e.jsx(T,{children:f.actions})]})}),e.jsx(Ie,{children:B.map(s=>{const u=Ue(s.expiresAt);return e.jsxs(Z,{children:[e.jsx(G,{className:"text-center w-12",children:e.jsx(de,{checked:c.has(s.id),onChange:w=>Be(s.id,w)})}),e.jsx(G,{className:"font-medium text-center",children:s.domain}),e.jsx(G,{className:"text-center",children:s.registrar||"-"}),e.jsx(G,{className:"text-center min-w-[140px]",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"whitespace-nowrap",children:Ve(s.expiresAt)}),u&&e.jsxs("div",{className:`text-xs ${u.className||"text-muted-foreground"} flex items-center justify-center gap-1`,children:[u.warning&&e.jsx(fs,{className:"h-3 w-3 text-red-600"}),u.text]})]})}),e.jsx(G,{className:"text-center",children:s.dnsProvider||"-"}),e.jsx(G,{className:"max-w-[200px] truncate text-center",children:s.domainStatus||"-"}),e.jsx(G,{className:"text-center",children:e.jsx(as,{variant:Ee[s.status].variant,children:Ts(s.status)})}),e.jsx(G,{className:"text-sm text-muted-foreground text-center",children:Ke(s.lastCheck)}),e.jsx(G,{children:e.jsx(D,{variant:"ghost",size:"sm",onClick:()=>r(s.id),children:s.notifications?e.jsx(is,{className:"h-4 w-4"}):e.jsx(ls,{className:"h-4 w-4"})})}),e.jsx(G,{children:e.jsx(D,{variant:"ghost",size:"sm",onClick:()=>t(s.id),children:e.jsx(xs,{className:"h-4 w-4"})})})]},s.id)})})]})}),B.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:i?"没有找到匹配的域名":h!==null?"此分组暂无域名":"暂无域名数据"}),e.jsx(Ss,{open:p,onClose:()=>F(!1),selectedDomains:Array.from(c),domains:a,onSuccess:qe,language:j})]})}function Ls({language:a="zh",onExportComplete:r}){const[t,m]=o.useState(!1),[g,j]=o.useState(!1),[i,y]=o.useState("csv"),[N,k]=o.useState("domains"),n=a==="en"?{title:"Export Data",description:"Choose format and filename for data export",format:"Export Format",filename:"File Name",export:"Export",exporting:"Exporting...",cancel:"Cancel",csvDesc:"Excel compatible spreadsheet",pdfDesc:"Professional formatted report (Print to PDF)",jsonDesc:"Complete data backup",filenameHelp:"File name (without extension)",exportSuccess:"Export completed successfully",exportError:"Export failed",allFields:"All 6 domain fields will be exported (Domain, Registrar, Expires At, DNS Provider, Status Badge, Last Check Time)",loadingDomains:"Loading domain data...",noData:"No domain data available"}:{title:"导出数据",description:"选择导出格式和文件名",format:"导出格式",filename:"文件名",export:"导出",exporting:"导出中...",cancel:"取消",csvDesc:"Excel兼容的电子表格",pdfDesc:"专业格式的报告（打印为PDF）",jsonDesc:"完整数据备份",filenameHelp:"文件名（不含扩展名）",exportSuccess:"导出成功完成",exportError:"导出失败",allFields:"将导出全部6个域名字段（域名、注册商、到期时间、DNS提供商、状态标识、最后检查时间）",loadingDomains:"正在加载域名数据...",noData:"没有可用的域名数据"},x=async()=>{j(!0);try{console.log(n.loadingDomains);const p=await E.getDomains();if(p.length===0){alert(`⚠️ ${n.noData}`);return}const F=["domain","registrar","expiresAt","dnsProvider","status","lastCheck"];console.log(`开始前端导出: 格式=${i}, 字段=${F.length}个, 域名=${p.length}个`);const d=await ns.export(i,p,F,N.trim()||"domains",a,{title:a==="en"?"Domain Monitoring Report":"域名监控报告"});d.success&&(r?.(d),console.log(n.exportSuccess,d),m(!1),setTimeout(()=>{let R=`✅ ${n.exportSuccess}

`;R+=`文件：${d.filename}
`,R+=`记录数：${d.totalRecords}
`,R+=`字段数：${d.selectedFields} (域名、注册商、到期时间、DNS提供商、状态标识、最后检查时间)`,i==="pdf"&&d.note&&(R+=`

💡 ${d.note}`),alert(R)},100))}catch(p){console.error(n.exportError,p),alert(`❌ ${n.exportError}

错误详情：${p instanceof Error?p.message:"未知错误"}

请检查网络连接或刷新页面重试。`)}finally{j(!1)}},C={csv:ne,pdf:le,json:ie}[i];return e.jsxs(ue,{open:t,onOpenChange:m,children:[e.jsx(rs,{asChild:!0,children:e.jsxs(D,{variant:"outline",className:"gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),a==="en"?"Export Data":"导出数据"]})}),e.jsxs(pe,{className:"max-w-lg",children:[e.jsxs(xe,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),n.title]}),e.jsx(fe,{children:n.description})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(I,{className:"text-base font-medium",children:n.format}),e.jsxs(os,{value:i,onValueChange:p=>y(p),className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx(U,{value:"csv",id:"csv"}),e.jsx(ne,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{htmlFor:"csv",className:"font-medium cursor-pointer",children:"CSV"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.csvDesc})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx(U,{value:"pdf",id:"pdf"}),e.jsx(le,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{htmlFor:"pdf",className:"font-medium cursor-pointer",children:"PDF"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.pdfDesc})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx(U,{value:"json",id:"json"}),e.jsx(ie,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{htmlFor:"json",className:"font-medium cursor-pointer",children:"JSON"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.jsonDesc})]})]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:a==="en"?"Client-side Export":"前端导出"})]}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["📋 ",n.allFields,e.jsx("br",{}),a==="en"?"⚡ Faster processing, no server storage required":"⚡ 处理更快，无需服务器存储空间"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"filename",className:"text-base font-medium",children:n.filename}),e.jsx(je,{id:"filename",value:N,onChange:p=>k(p.target.value),placeholder:a==="en"?"domains":"域名列表"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.filenameHelp})]})]}),e.jsxs(ge,{className:"gap-2",children:[e.jsx(D,{variant:"outline",onClick:()=>m(!1),disabled:g,children:n.cancel}),e.jsx(D,{onClick:x,disabled:g,className:"gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 animate-spin"}),n.exporting]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4"}),n.export]})})]})]})]})}export{Ls as D,xs as R,Es as T,ys as a,Ns as b,ws as c,ks as d,Ps as e};
